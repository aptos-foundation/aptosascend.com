---
import type { ItemLink } from "datocms-structured-text-utils";
import { readFragment, type FragmentOf } from "~/lib/datocms/graphql";
import type { TransformedMeta } from "datocms-structured-text-generic-html-renderer";
import { PageLinkFragment } from "./fragments";
import { Link } from "~/components/Link";

interface Props {
  node: ItemLink;
  record: FragmentOf<typeof PageLinkFragment>;
  attrs: TransformedMeta;
}

const { record, attrs } = Astro.props;
const pageLink = readFragment(PageLinkFragment, record);
---

<Link {...attrs} title={pageLink.title}><slot /></Link>
